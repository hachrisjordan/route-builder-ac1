{"ast":null,"code":"import React,{useState}from'react';import{Select,InputNumber,Button,Table,Card,Tag,Spin,Input}from'antd';import{SearchOutlined}from'@ant-design/icons';import{airports}from'../data/airports';import airlines from'../data/airlines';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FlightSearch=()=>{const[departure,setDeparture]=useState(null);const[arrival,setArrival]=useState(null);const[selectedAirlines,setSelectedAirlines]=useState([]);const[maxSegments,setMaxSegments]=useState(4);const[searchResults,setSearchResults]=useState(null);const[isLoading,setIsLoading]=useState(false);const[pagination,setPagination]=useState({current:1,pageSize:25,total:0});const[errors,setErrors]=useState({departure:false,arrival:false,maxSegments:false});const[tableSearchText,setTableSearchText]=useState('');// Sort airlines alphabetically\nconst sortedAirlines=[...airlines].map(airline=>({...airline,searchStr:`${airline.value} ${airline.label}`.toLowerCase()})).sort((a,b)=>a.label.localeCompare(b.label));const airportSelectProps={showSearch:true,allowClear:true,suffixIcon:null,options:airports.map(airport=>({value:airport.IATA,label:`${airport.IATA} - ${airport.Name} (${airport.Country})`,searchStr:`${airport.IATA} ${airport.Name}`.toLowerCase()})),filterOption:(input,option)=>{if(!input)return true;input=input.toString().toLowerCase();// IATA match\nif(option.value.toLowerCase().includes(input)){option.priority=2;return true;}// Name/label match\nif(option.label.toLowerCase().includes(input)){option.priority=1;return true;}return false;},filterSort:(optionA,optionB)=>{// Sort by priority (IATA matches first)\nif(optionA.priority!==optionB.priority){return optionB.priority-optionA.priority;}// Then alphabetically\nreturn optionA.label.localeCompare(optionB.label);},listHeight:256,virtual:true,dropdownStyle:{maxHeight:400}};const airlineSelectProps={showSearch:true,allowClear:true,filterSort:(optionA,optionB,input)=>{if(!input)return optionA.label.localeCompare(optionB.label);const searchInput=input.toString().toLowerCase();const aMatch=optionA.searchStr.includes(searchInput);const bMatch=optionB.searchStr.includes(searchInput);if(aMatch&&!bMatch)return-1;if(!aMatch&&bMatch)return 1;return optionA.label.localeCompare(optionB.label);},filterOption:(input,option)=>{if(!input)return true;const searchInput=input.toString().toLowerCase();return option.searchStr.includes(searchInput);},listHeight:400,virtual:false,menuItemSelectedIcon:null,dropdownStyle:{maxHeight:400}};const columns=[{title:'Origin',dataIndex:'departure',sorter:(a,b)=>a.departure.localeCompare(b.departure),width:100},{title:'Destination',dataIndex:'arrival',sorter:(a,b)=>a.arrival.localeCompare(b.arrival),width:100},{title:'Connections',key:'connections',render:(_,record)=>/*#__PURE__*/_jsx(\"span\",{children:record.connections.length>0?record.connections.join(' â†’ '):'-'}),width:300},{title:'Stops',dataIndex:'numConnections',sorter:(a,b)=>a.numConnections-b.numConnections,render:num=>{let color;switch(num){case 0:color='green';break;case 1:color='blue';break;case 2:color='orange';break;case 3:color='gold';break;default:color='red';}return/*#__PURE__*/_jsx(Tag,{color:color,children:num===0?'Direct':`${num} Stop${num>1?'s':''}`});},width:100},{title:'Distance',dataIndex:'totalDistance',sorter:(a,b)=>a.totalDistance-b.totalDistance,render:distance=>distance.toLocaleString(),width:120,align:'right'},{title:'Economy',dataIndex:'YPrice',sorter:(a,b)=>a.YPrice-b.YPrice,render:price=>price.toLocaleString(),width:120,align:'right'},{title:'Business',dataIndex:'JPrice',sorter:(a,b)=>a.JPrice-b.JPrice,render:price=>price.toLocaleString(),width:120,align:'right'},{title:'First',dataIndex:'FPrice',sorter:(a,b)=>a.FPrice-b.FPrice,render:price=>price.toLocaleString(),width:120,align:'right'}];const handleSearch=async()=>{// Reset errors\nsetErrors({departure:!departure,arrival:!arrival,maxSegments:!maxSegments});// Validate mandatory fields\nif(!departure||!arrival||!maxSegments){return;}setIsLoading(true);try{const response=await fetch('https://backend-284998006367.us-central1.run.app/api/find-routes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({departureAirport:departure,arrivalAirport:arrival,excludedAirline:selectedAirlines.length?selectedAirlines[0]:\"null\",maxSegments:maxSegments})});if(!response.ok){throw new Error('Search failed');}const data=await response.json();setSearchResults(data);setPagination(prev=>({...prev,total:data.routes.length}));}catch(error){console.error('Search failed:',error);}finally{setIsLoading(false);}};const handleTableChange=(newPagination,filters,sorter)=>{setPagination(newPagination);};// Filter function for the table data\nconst getFilteredData=()=>{if(!searchResults||!tableSearchText)return searchResults===null||searchResults===void 0?void 0:searchResults.routes;const searchTerms=tableSearchText.toLowerCase().split(/\\s+/).filter(term=>term);return searchResults.routes.filter(route=>{const routeString=`${route.departure} ${route.arrival} ${route.connections.join(' ')}`.toLowerCase();// Check if all search terms are present in any order\nreturn searchTerms.every(term=>routeString.includes(term));});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flight-search-container\",children:[/*#__PURE__*/_jsxs(Card,{className:\"search-form\",style:{boxShadow:'0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px 0 rgba(0, 0, 0, 0.02)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flight-search-element\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"element-label\",children:\"Departure Airport: *\"}),/*#__PURE__*/_jsx(Select,{...airportSelectProps,value:departure,onChange:setDeparture,placeholder:\"Select departure airport...\",className:\"airport-select\",status:errors.departure?'error':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-search-element\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"element-label\",children:\"Arrival Airport: *\"}),/*#__PURE__*/_jsx(Select,{...airportSelectProps,value:arrival,onChange:setArrival,placeholder:\"Select arrival airport...\",className:\"airport-select\",status:errors.arrival?'error':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-search-element\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"element-label\",children:\"Airlines Excluded:\"}),/*#__PURE__*/_jsx(Select,{...airlineSelectProps,mode:\"multiple\",value:selectedAirlines,onChange:setSelectedAirlines,options:sortedAirlines,placeholder:\"Select airlines...\",className:\"airline-select\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"segments-element\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"element-label\",children:\"Maximum Segments *\"}),/*#__PURE__*/_jsx(InputNumber,{min:1,max:5,value:maxSegments,onChange:setMaxSegments,status:errors.maxSegments?'error':''})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(SearchOutlined,{}),onClick:handleSearch,loading:isLoading,className:\"search-button\",children:\"Search\"})]}),searchResults&&/*#__PURE__*/_jsx(Card,{className:\"results-card\",title:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Search Results\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Search routes...\",value:tableSearchText,onChange:e=>setTableSearchText(e.target.value),style:{width:200},allowClear:true})]}),style:{boxShadow:'0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px 0 rgba(0, 0, 0, 0.02)'},children:/*#__PURE__*/_jsx(Table,{dataSource:getFilteredData(),columns:columns,rowKey:(record,index)=>index,pagination:{...pagination,showSizeChanger:true,showTotal:(total,range)=>`${range[0]}-${range[1]} of ${total} routes`,pageSizeOptions:['10','25','50','100'],defaultPageSize:25},loading:isLoading,onChange:handleTableChange,scroll:{x:1010}})}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        .flight-search-container {\n          max-width: 1200px;\n          margin: 20px auto;\n          padding: 0 20px;\n        }\n        .search-form {\n          margin-bottom: 20px;\n        }\n        .flight-search-element {\n          margin-bottom: 16px;\n        }\n        .element-label {\n          margin-bottom: 8px;\n          font-weight: 500;\n        }\n        .element-label::after {\n          content: \" *\";\n          color: #ff4d4f;\n          display: none;\n        }\n        .element-label:has(+ [data-required=\"true\"])::after {\n          display: inline;\n        }\n        .airport-select,\n        .airline-select {\n          width: 100%;\n        }\n        .segments-element {\n          margin-bottom: 16px;\n        }\n        .search-button {\n          margin-top: 24px;\n          width: 100%;\n        }\n        .results-card {\n          margin-top: 24px;\n        }\n        :global(.ant-table) {\n          font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n        }\n      `})]});};export default FlightSearch;","map":{"version":3,"names":["React","useState","Select","InputNumber","Button","Table","Card","Tag","Spin","Input","SearchOutlined","airports","airlines","jsx","_jsx","jsxs","_jsxs","FlightSearch","departure","setDeparture","arrival","setArrival","selectedAirlines","setSelectedAirlines","maxSegments","setMaxSegments","searchResults","setSearchResults","isLoading","setIsLoading","pagination","setPagination","current","pageSize","total","errors","setErrors","tableSearchText","setTableSearchText","sortedAirlines","map","airline","searchStr","value","label","toLowerCase","sort","a","b","localeCompare","airportSelectProps","showSearch","allowClear","suffixIcon","options","airport","IATA","Name","Country","filterOption","input","option","toString","includes","priority","filterSort","optionA","optionB","listHeight","virtual","dropdownStyle","maxHeight","airlineSelectProps","searchInput","aMatch","bMatch","menuItemSelectedIcon","columns","title","dataIndex","sorter","width","key","render","_","record","children","connections","length","join","numConnections","num","color","totalDistance","distance","toLocaleString","align","YPrice","price","JPrice","FPrice","handleSearch","response","fetch","method","headers","body","JSON","stringify","departureAirport","arrivalAirport","excludedAirline","ok","Error","data","json","prev","routes","error","console","handleTableChange","newPagination","filters","getFilteredData","searchTerms","split","filter","term","route","routeString","every","className","style","boxShadow","onChange","placeholder","status","mode","min","max","type","icon","onClick","loading","display","justifyContent","alignItems","e","target","dataSource","rowKey","index","showSizeChanger","showTotal","range","pageSizeOptions","defaultPageSize","scroll","x"],"sources":["/Users/hanguyen/Desktop/routebuilder/src/pages/FlightSearch.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Select, InputNumber, Button, Table, Card, Tag, Spin, Input } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { airports } from '../data/airports';\nimport airlines from '../data/airlines';\n\nconst FlightSearch = () => {\n  const [departure, setDeparture] = useState(null);\n  const [arrival, setArrival] = useState(null);\n  const [selectedAirlines, setSelectedAirlines] = useState([]);\n  const [maxSegments, setMaxSegments] = useState(4);\n  const [searchResults, setSearchResults] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [pagination, setPagination] = useState({\n    current: 1,\n    pageSize: 25,\n    total: 0,\n  });\n  const [errors, setErrors] = useState({\n    departure: false,\n    arrival: false,\n    maxSegments: false\n  });\n  const [tableSearchText, setTableSearchText] = useState('');\n\n  // Sort airlines alphabetically\n  const sortedAirlines = [...airlines]\n    .map(airline => ({\n      ...airline,\n      searchStr: `${airline.value} ${airline.label}`.toLowerCase()\n    }))\n    .sort((a, b) => a.label.localeCompare(b.label));\n\n  const airportSelectProps = {\n    showSearch: true,\n    allowClear: true,\n    suffixIcon: null,\n    options: airports.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`,\n      searchStr: `${airport.IATA} ${airport.Name}`.toLowerCase()\n    })),\n    filterOption: (input, option) => {\n      if (!input) return true;\n      input = input.toString().toLowerCase();\n      \n      // IATA match\n      if (option.value.toLowerCase().includes(input)) {\n        option.priority = 2;\n        return true;\n      }\n      \n      // Name/label match\n      if (option.label.toLowerCase().includes(input)) {\n        option.priority = 1;\n        return true;\n      }\n      \n      return false;\n    },\n    filterSort: (optionA, optionB) => {\n      // Sort by priority (IATA matches first)\n      if (optionA.priority !== optionB.priority) {\n        return optionB.priority - optionA.priority;\n      }\n      // Then alphabetically\n      return optionA.label.localeCompare(optionB.label);\n    },\n    listHeight: 256,\n    virtual: true,\n    dropdownStyle: { maxHeight: 400 }\n  };\n\n  const airlineSelectProps = {\n    showSearch: true,\n    allowClear: true,\n    filterSort: (optionA, optionB, input) => {\n      if (!input) return optionA.label.localeCompare(optionB.label);\n      \n      const searchInput = input.toString().toLowerCase();\n      const aMatch = optionA.searchStr.includes(searchInput);\n      const bMatch = optionB.searchStr.includes(searchInput);\n      \n      if (aMatch && !bMatch) return -1;\n      if (!aMatch && bMatch) return 1;\n\n      return optionA.label.localeCompare(optionB.label);\n    },\n    filterOption: (input, option) => {\n      if (!input) return true;\n      const searchInput = input.toString().toLowerCase();\n      return option.searchStr.includes(searchInput);\n    },\n    listHeight: 400,\n    virtual: false,\n    menuItemSelectedIcon: null,\n    dropdownStyle: { maxHeight: 400 }\n  };\n\n  const columns = [\n    {\n      title: 'Origin',\n      dataIndex: 'departure',\n      sorter: (a, b) => a.departure.localeCompare(b.departure),\n      width: 100,\n    },\n    {\n      title: 'Destination',\n      dataIndex: 'arrival',\n      sorter: (a, b) => a.arrival.localeCompare(b.arrival),\n      width: 100,\n    },\n    {\n      title: 'Connections',\n      key: 'connections',\n      render: (_, record) => (\n        <span>\n          {record.connections.length > 0 \n            ? record.connections.join(' â†’ ')\n            : '-'}\n        </span>\n      ),\n      width: 300,\n    },\n    {\n      title: 'Stops',\n      dataIndex: 'numConnections',\n      sorter: (a, b) => a.numConnections - b.numConnections,\n      render: (num) => {\n        let color;\n        switch (num) {\n          case 0:\n            color = 'green';\n            break;\n          case 1:\n            color = 'blue';\n            break;\n          case 2:\n            color = 'orange';\n            break;\n          case 3:\n            color = 'gold';\n            break;\n          default:\n            color = 'red';\n        }\n        return (\n          <Tag color={color}>\n            {num === 0 ? 'Direct' : `${num} Stop${num > 1 ? 's' : ''}`}\n          </Tag>\n        );\n      },\n      width: 100,\n    },\n    {\n      title: 'Distance',\n      dataIndex: 'totalDistance',\n      sorter: (a, b) => a.totalDistance - b.totalDistance,\n      render: (distance) => distance.toLocaleString(),\n      width: 120,\n      align: 'right',\n    },\n    {\n      title: 'Economy',\n      dataIndex: 'YPrice',\n      sorter: (a, b) => a.YPrice - b.YPrice,\n      render: (price) => price.toLocaleString(),\n      width: 120,\n      align: 'right',\n    },\n    {\n      title: 'Business',\n      dataIndex: 'JPrice',\n      sorter: (a, b) => a.JPrice - b.JPrice,\n      render: (price) => price.toLocaleString(),\n      width: 120,\n      align: 'right',\n    },\n    {\n      title: 'First',\n      dataIndex: 'FPrice',\n      sorter: (a, b) => a.FPrice - b.FPrice,\n      render: (price) => price.toLocaleString(),\n      width: 120,\n      align: 'right',\n    },\n  ];\n\n  const handleSearch = async () => {\n    // Reset errors\n    setErrors({\n      departure: !departure,\n      arrival: !arrival,\n      maxSegments: !maxSegments\n    });\n\n    // Validate mandatory fields\n    if (!departure || !arrival || !maxSegments) {\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('https://backend-284998006367.us-central1.run.app/api/find-routes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          departureAirport: departure,\n          arrivalAirport: arrival,\n          excludedAirline: selectedAirlines.length ? selectedAirlines[0] : \"null\",\n          maxSegments: maxSegments\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Search failed');\n      }\n\n      const data = await response.json();\n      setSearchResults(data);\n      setPagination(prev => ({\n        ...prev,\n        total: data.routes.length\n      }));\n    } catch (error) {\n      console.error('Search failed:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTableChange = (newPagination, filters, sorter) => {\n    setPagination(newPagination);\n  };\n\n  // Filter function for the table data\n  const getFilteredData = () => {\n    if (!searchResults || !tableSearchText) return searchResults?.routes;\n    \n    const searchTerms = tableSearchText.toLowerCase().split(/\\s+/).filter(term => term);\n    \n    return searchResults.routes.filter(route => {\n      const routeString = `${route.departure} ${route.arrival} ${route.connections.join(' ')}`.toLowerCase();\n      \n      // Check if all search terms are present in any order\n      return searchTerms.every(term => routeString.includes(term));\n    });\n  };\n\n  return (\n    <div className=\"flight-search-container\">\n      <Card \n        className=\"search-form\" \n        style={{ boxShadow: '0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px 0 rgba(0, 0, 0, 0.02)' }}\n      >\n        <div className=\"flight-search-element\">\n          <div className=\"element-label\">Departure Airport: *</div>\n          <Select\n            {...airportSelectProps}\n            value={departure}\n            onChange={setDeparture}\n            placeholder=\"Select departure airport...\"\n            className=\"airport-select\"\n            status={errors.departure ? 'error' : ''}\n          />\n        </div>\n\n        <div className=\"flight-search-element\">\n          <div className=\"element-label\">Arrival Airport: *</div>\n          <Select\n            {...airportSelectProps}\n            value={arrival}\n            onChange={setArrival}\n            placeholder=\"Select arrival airport...\"\n            className=\"airport-select\"\n            status={errors.arrival ? 'error' : ''}\n          />\n        </div>\n\n        <div className=\"flight-search-element\">\n          <div className=\"element-label\">Airlines Excluded:</div>\n          <Select\n            {...airlineSelectProps}\n            mode=\"multiple\"\n            value={selectedAirlines}\n            onChange={setSelectedAirlines}\n            options={sortedAirlines}\n            placeholder=\"Select airlines...\"\n            className=\"airline-select\"\n          />\n        </div>\n\n        <div className=\"segments-element\">\n          <div className=\"element-label\">Maximum Segments *</div>\n          <InputNumber\n            min={1}\n            max={5}\n            value={maxSegments}\n            onChange={setMaxSegments}\n            status={errors.maxSegments ? 'error' : ''}\n          />\n        </div>\n\n        <Button \n          type=\"primary\"\n          icon={<SearchOutlined />}\n          onClick={handleSearch}\n          loading={isLoading}\n          className=\"search-button\"\n        >\n          Search\n        </Button>\n      </Card>\n\n      {searchResults && (\n        <Card \n          className=\"results-card\" \n          title={\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <span>Search Results</span>\n              <Input\n                placeholder=\"Search routes...\"\n                value={tableSearchText}\n                onChange={e => setTableSearchText(e.target.value)}\n                style={{ width: 200 }}\n                allowClear\n              />\n            </div>\n          }\n          style={{ boxShadow: '0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px 0 rgba(0, 0, 0, 0.02)' }}\n        >\n          <Table\n            dataSource={getFilteredData()}\n            columns={columns}\n            rowKey={(record, index) => index}\n            pagination={{\n              ...pagination,\n              showSizeChanger: true,\n              showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} routes`,\n              pageSizeOptions: ['10', '25', '50', '100'],\n              defaultPageSize: 25,\n            }}\n            loading={isLoading}\n            onChange={handleTableChange}\n            scroll={{ x: 1010 }}\n          />\n        </Card>\n      )}\n\n      <style jsx>{`\n        .flight-search-container {\n          max-width: 1200px;\n          margin: 20px auto;\n          padding: 0 20px;\n        }\n        .search-form {\n          margin-bottom: 20px;\n        }\n        .flight-search-element {\n          margin-bottom: 16px;\n        }\n        .element-label {\n          margin-bottom: 8px;\n          font-weight: 500;\n        }\n        .element-label::after {\n          content: \" *\";\n          color: #ff4d4f;\n          display: none;\n        }\n        .element-label:has(+ [data-required=\"true\"])::after {\n          display: inline;\n        }\n        .airport-select,\n        .airline-select {\n          width: 100%;\n        }\n        .segments-element {\n          margin-bottom: 16px;\n        }\n        .search-button {\n          margin-top: 24px;\n          width: 100%;\n        }\n        .results-card {\n          margin-top: 24px;\n        }\n        :global(.ant-table) {\n          font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default FlightSearch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
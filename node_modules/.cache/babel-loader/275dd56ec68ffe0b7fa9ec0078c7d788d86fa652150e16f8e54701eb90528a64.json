{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguyen77\\\\docker-neo4j\\\\route-builder-ac1\\\\src\\\\components\\\\FlightSearch\\\\FlightDetailsModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Modal, DatePicker, Input, Spin, Table, Button, Typography } from 'antd';\nimport dayjs from 'dayjs';\nimport { getSegmentColumns } from './segmentColumns';\nimport useFlightDetails from './hooks/useFlightDetails';\nimport FlightAvailabilityCalendar from './FlightAvailabilityCalendar';\nimport airlines from './data/airlines';\nimport { airports } from './data/airports';\nimport pricingData from './data/pricing.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  RangePicker\n} = DatePicker;\nconst FlightDetailsModal = ({\n  isVisible,\n  currentRoute,\n  onClose\n}) => {\n  _s();\n  var _selectedFlights$, _selectedFlights$$, _selectedFlights, _selectedFlights$2, _selectedFlights$3, _selectedFlights$3$, _selectedFlights2, _selectedFlights2$;\n  const [dateRangeError, setDateRangeError] = useState(false);\n  const {\n    selectedDates,\n    setSelectedDates,\n    apiKey,\n    setApiKey,\n    segmentDetails,\n    isLoadingSegments,\n    handleDateSearch,\n    handleCalendarSearch,\n    resetDetails,\n    columns,\n    selectedFlights,\n    availabilityData,\n    isLoadingAvailability\n  } = useFlightDetails(getSegmentColumns);\n\n  // Clear data when modal closes\n  useEffect(() => {\n    if (!isVisible) {\n      resetDetails();\n      setDateRangeError(false);\n      setSelectedDates(null);\n      setApiKey('');\n    }\n  }, [isVisible]);\n  const handleOk = () => {\n    handleDateSearch(currentRoute);\n  };\n  const handleCancel = () => {\n    onClose();\n  };\n  const handleCalendarDateSelect = dateRange => {\n    setSelectedDates(dateRange);\n    setDateRangeError(false);\n  };\n  const handleCalendarSearchClick = () => {\n    if (!selectedDates) {\n      setDateRangeError(true);\n      return;\n    }\n    handleDateSearch(currentRoute);\n  };\n\n  // Function to group flights by segment with safety checks\n  const getSegmentTables = () => {\n    if (!(segmentDetails !== null && segmentDetails !== void 0 && segmentDetails.length) || !(currentRoute !== null && currentRoute !== void 0 && currentRoute.length)) return [];\n\n    // Group flights by segment index\n    const segmentGroups = segmentDetails.reduce((acc, flight) => {\n      const segmentIndex = flight.segmentIndex;\n      if (!acc[segmentIndex]) {\n        acc[segmentIndex] = [];\n      }\n      acc[segmentIndex].push(flight);\n      return acc;\n    }, {});\n\n    // Convert to array format with segment info\n    return Object.entries(segmentGroups).map(([index, flights]) => {\n      const currentIndex = parseInt(index);\n      const nextIndex = currentIndex + 1;\n\n      // Safety check for route indices\n      if (nextIndex >= currentRoute.length) return null;\n      const segmentRoute = `${currentRoute[currentIndex]}-${currentRoute[nextIndex]}`;\n      return {\n        index: currentIndex,\n        route: segmentRoute,\n        flights\n      };\n    }).filter(Boolean); // Remove any null entries\n  };\n\n  // Add pagination settings\n  const paginationConfig = {\n    pageSize: 5,\n    showSizeChanger: true,\n    showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} flights`,\n    pageSizeOptions: ['5', '10', '20', '50'],\n    position: ['bottomLeft']\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: \"Flight Details\",\n    open: isVisible,\n    onCancel: handleCancel,\n    footer: null,\n    width: 1600,\n    styles: {\n      body: {\n        padding: '12px',\n        maxHeight: '90vh',\n        overflow: 'auto'\n      },\n      content: {\n        maxWidth: '100vw'\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px',\n          marginBottom: 16\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '8px',\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Enter your yapping password (Under Development)\",\n            value: apiKey,\n            onChange: e => setApiKey(e.target.value),\n            style: {\n              flex: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            disabled: !apiKey || !apiKey.toLowerCase().startsWith('pro'),\n            onClick: () => handleCalendarSearch(currentRoute),\n            children: \"Apply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), dateRangeError && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red'\n        },\n        children: \"Please select a date range in the calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FlightAvailabilityCalendar, {\n      flightData: availabilityData,\n      currentRoute: currentRoute,\n      onDateRangeSelect: handleCalendarDateSelect,\n      selectedRange: selectedDates,\n      onSearch: handleCalendarSearchClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), isLoadingSegments ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: '20px 0'\n      },\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }, this) : (segmentDetails === null || segmentDetails === void 0 ? void 0 : segmentDetails.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 4,\n        style: {\n          marginBottom: 0\n        },\n        children: \"Flights By Segment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }, this), getSegmentTables().map((segment, index) => {\n        var _segment$flights$find;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n            level: 5,\n            style: {\n              marginBottom: 12\n            },\n            children: [\"Segment \", segment.index, \" (\", segment.route, \"):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            columns: columns,\n            dataSource: segment.flights,\n            pagination: paginationConfig,\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }, this), index < getSegmentTables().length - 1 && segment.flights.some(f => f.isSelected) && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '0px',\n              margin: '0px',\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography.Text, {\n              strong: true,\n              children: (_segment$flights$find = segment.flights.find(f => f.isSelected)) !== null && _segment$flights$find !== void 0 && _segment$flights$find.layoverDuration ? `Layover duration: ${segment.flights.find(f => f.isSelected).layoverDuration}` : 'Select flights to see layover duration'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 19\n          }, this)]\n        }, segment.index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }, this), Object.keys(selectedFlights).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 4,\n        children: \"Journey Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        columns: [{\n          title: 'From',\n          dataIndex: 'from',\n          key: 'from'\n        }, {\n          title: 'To',\n          dataIndex: 'to',\n          key: 'to'\n        }, {\n          title: 'Airlines',\n          dataIndex: 'airlines',\n          key: 'airlines',\n          render: airlinesList => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '4px'\n            },\n            children: airlinesList.split(', ').map(airlineName => {\n              const airline = airlines.find(a => airlineName.startsWith(a.label.replace(` (${a.value})`, '')));\n              const airlineCode = airline === null || airline === void 0 ? void 0 : airline.value;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${process.env.PUBLIC_URL}/${airlineCode}.png`,\n                  alt: airlineCode,\n                  style: {\n                    width: '24px',\n                    height: '24px',\n                    objectFit: 'contain',\n                    borderRadius: '4px'\n                  },\n                  onError: e => {\n                    e.target.style.display = 'none';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 27\n                }, this), airlineName]\n              }, airlineCode, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 19\n          }, this)\n        }, {\n          title: 'Duration',\n          dataIndex: 'duration',\n          key: 'duration'\n        }, {\n          title: 'Departs',\n          dataIndex: 'departs',\n          key: 'departs'\n        }, {\n          title: 'Arrives',\n          dataIndex: 'arrives',\n          key: 'arrives'\n        }, {\n          title: 'Economy Price',\n          dataIndex: 'economyPrice',\n          key: 'economyPrice'\n        }, {\n          title: 'Business Price (Max %)',\n          dataIndex: 'businessPrice',\n          key: 'businessPrice'\n        }, {\n          title: 'First Price (Max %)',\n          dataIndex: 'firstPrice',\n          key: 'firstPrice'\n        }],\n        dataSource: [{\n          key: 'summary',\n          from: ((_selectedFlights$ = selectedFlights[0]) === null || _selectedFlights$ === void 0 ? void 0 : (_selectedFlights$$ = _selectedFlights$[0]) === null || _selectedFlights$$ === void 0 ? void 0 : _selectedFlights$$.from) || '-',\n          to: ((_selectedFlights = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights === void 0 ? void 0 : (_selectedFlights$2 = _selectedFlights[0]) === null || _selectedFlights$2 === void 0 ? void 0 : _selectedFlights$2.to) || '-',\n          airlines: [...new Set(Object.values(selectedFlights).flatMap(flights => flights.map(f => f.airlines)))].join(', '),\n          duration: (() => {\n            let totalMinutes = 0;\n            const segments = Object.keys(selectedFlights).sort((a, b) => parseInt(a) - parseInt(b));\n            segments.forEach(segmentIndex => {\n              const flight = selectedFlights[segmentIndex][0];\n              totalMinutes += parseInt(flight.duration);\n              const nextSegmentIndex = (parseInt(segmentIndex) + 1).toString();\n              if (selectedFlights[nextSegmentIndex]) {\n                const currentFlight = selectedFlights[segmentIndex][0];\n                const nextFlight = selectedFlights[nextSegmentIndex][0];\n                const arrivalTime = dayjs(currentFlight.ArrivesAt);\n                const departureTime = dayjs(nextFlight.DepartsAt);\n                const layoverMinutes = departureTime.diff(arrivalTime, 'minute');\n                totalMinutes += layoverMinutes;\n              }\n            });\n            const hours = Math.floor(totalMinutes / 60);\n            const minutes = totalMinutes % 60;\n            return `${hours}h ${minutes}m`;\n          })(),\n          departs: dayjs((_selectedFlights$3 = selectedFlights[0]) === null || _selectedFlights$3 === void 0 ? void 0 : (_selectedFlights$3$ = _selectedFlights$3[0]) === null || _selectedFlights$3$ === void 0 ? void 0 : _selectedFlights$3$.DepartsAt).format('HH:mm MM-DD'),\n          arrives: dayjs((_selectedFlights2 = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights2 === void 0 ? void 0 : (_selectedFlights2$ = _selectedFlights2[0]) === null || _selectedFlights2$ === void 0 ? void 0 : _selectedFlights2$.ArrivesAt).format('HH:mm MM-DD'),\n          economyPrice: (() => {\n            // Get origin and destination airports\n            const originAirport = airports.find(a => {\n              var _selectedFlights$4, _selectedFlights$4$;\n              return a.IATA === ((_selectedFlights$4 = selectedFlights[0]) === null || _selectedFlights$4 === void 0 ? void 0 : (_selectedFlights$4$ = _selectedFlights$4[0]) === null || _selectedFlights$4$ === void 0 ? void 0 : _selectedFlights$4$.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights3, _selectedFlights3$;\n              return a.IATA === ((_selectedFlights3 = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights3 === void 0 ? void 0 : (_selectedFlights3$ = _selectedFlights3[0]) === null || _selectedFlights3$ === void 0 ? void 0 : _selectedFlights3$.to);\n            });\n            if (!originAirport || !destAirport) return '-';\n\n            // Calculate total distance\n            let totalDistance = 0;\n            Object.values(selectedFlights).forEach(flights => {\n              flights.forEach(flight => {\n                totalDistance += parseInt(flight.distance || 0);\n              });\n            });\n\n            // Find matching price in pricing data\n            const pricing = pricingData.find(p => p[\"From Region\"] === originAirport.Zone && p[\"To Region\"] === destAirport.Zone && totalDistance >= p[\"Min Distance\"] && totalDistance <= p[\"Max Distance\"]);\n            return pricing ? pricing.Economy.toLocaleString() : '-';\n          })(),\n          businessPrice: (() => {\n            // Check if any segment has first class only (no eco or business)\n            const hasFirstOnly = Object.values(selectedFlights).some(flights => flights.some(flight => flight.first && !flight.economy && !flight.business));\n\n            // Check if all segments have business availability\n            const hasAllBusiness = Object.values(selectedFlights).every(flights => flights.some(flight => flight.business));\n\n            // Check if all segments have first class\n            const hasAllFirst = Object.values(selectedFlights).every(flights => flights.some(flight => flight.first));\n\n            // Return N/A if any of these conditions are true\n            if (hasFirstOnly || hasAllFirst) return 'N/A';\n            const originAirport = airports.find(a => {\n              var _selectedFlights$5, _selectedFlights$5$;\n              return a.IATA === ((_selectedFlights$5 = selectedFlights[0]) === null || _selectedFlights$5 === void 0 ? void 0 : (_selectedFlights$5$ = _selectedFlights$5[0]) === null || _selectedFlights$5$ === void 0 ? void 0 : _selectedFlights$5$.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights4, _selectedFlights4$;\n              return a.IATA === ((_selectedFlights4 = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights4 === void 0 ? void 0 : (_selectedFlights4$ = _selectedFlights4[0]) === null || _selectedFlights4$ === void 0 ? void 0 : _selectedFlights4$.to);\n            });\n            if (!originAirport || !destAirport) return '-';\n            let totalDistance = 0;\n            let businessDistance = 0;\n            console.log('Selected Flights:', selectedFlights);\n            Object.values(selectedFlights).forEach((flights, index) => {\n              flights.forEach(flight => {\n                const distance = parseInt(flight.distance || 0);\n                console.log(`Segment ${index}:`, {\n                  from: flight.from,\n                  to: flight.to,\n                  distance,\n                  hasBusiness: flight.business,\n                  rawDistance: flight.distance\n                });\n                totalDistance += distance;\n                if (flight.business) {\n                  businessDistance += distance;\n                }\n              });\n            });\n            console.log('Distance Summary:', {\n              totalDistance,\n              businessDistance,\n              percentage: Math.round(businessDistance / totalDistance * 100)\n            });\n            const businessPercentage = Math.round(businessDistance / totalDistance * 100);\n            const pricing = pricingData.find(p => p[\"From Region\"] === originAirport.Zone && p[\"To Region\"] === destAirport.Zone && totalDistance >= p[\"Min Distance\"] && totalDistance <= p[\"Max Distance\"]);\n            console.log('Pricing Match:', {\n              fromZone: originAirport.Zone,\n              toZone: destAirport.Zone,\n              totalDistance,\n              matchedPricing: pricing\n            });\n            return pricing ? `${pricing.Business.toLocaleString()} (${businessPercentage}%)` : '-';\n          })(),\n          firstPrice: (() => {\n            // Check if all segments have first class availability\n            const hasAllFirst = Object.values(selectedFlights).every(flights => flights.some(flight => flight.first));\n            if (!hasAllFirst) return 'N/A';\n            const originAirport = airports.find(a => {\n              var _selectedFlights$6, _selectedFlights$6$;\n              return a.IATA === ((_selectedFlights$6 = selectedFlights[0]) === null || _selectedFlights$6 === void 0 ? void 0 : (_selectedFlights$6$ = _selectedFlights$6[0]) === null || _selectedFlights$6$ === void 0 ? void 0 : _selectedFlights$6$.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights5, _selectedFlights5$;\n              return a.IATA === ((_selectedFlights5 = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights5 === void 0 ? void 0 : (_selectedFlights5$ = _selectedFlights5[0]) === null || _selectedFlights5$ === void 0 ? void 0 : _selectedFlights5$.to);\n            });\n            if (!originAirport || !destAirport) return '-';\n            let totalDistance = 0;\n            Object.values(selectedFlights).forEach(flights => {\n              flights.forEach(flight => {\n                totalDistance += parseInt(flight.distance || 0);\n              });\n            });\n            const pricing = pricingData.find(p => p[\"From Region\"] === originAirport.Zone && p[\"To Region\"] === destAirport.Zone && totalDistance >= p[\"Min Distance\"] && totalDistance <= p[\"Max Distance\"]);\n            return pricing && pricing.First ? pricing.First.toLocaleString() : '-';\n          })()\n        }],\n        pagination: false,\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        :global(.ant-table) {\n          font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(FlightDetailsModal, \"ZWtkI/7EBoe9m9vNkfWBmDZJCmQ=\", false, function () {\n  return [useFlightDetails];\n});\n_c = FlightDetailsModal;\nexport default FlightDetailsModal;\nvar _c;\n$RefreshReg$(_c, \"FlightDetailsModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","DatePicker","Input","Spin","Table","Button","Typography","dayjs","getSegmentColumns","useFlightDetails","FlightAvailabilityCalendar","airlines","airports","pricingData","jsxDEV","_jsxDEV","RangePicker","FlightDetailsModal","isVisible","currentRoute","onClose","_s","_selectedFlights$","_selectedFlights$$","_selectedFlights","_selectedFlights$2","_selectedFlights$3","_selectedFlights$3$","_selectedFlights2","_selectedFlights2$","dateRangeError","setDateRangeError","selectedDates","setSelectedDates","apiKey","setApiKey","segmentDetails","isLoadingSegments","handleDateSearch","handleCalendarSearch","resetDetails","columns","selectedFlights","availabilityData","isLoadingAvailability","handleOk","handleCancel","handleCalendarDateSelect","dateRange","handleCalendarSearchClick","getSegmentTables","length","segmentGroups","reduce","acc","flight","segmentIndex","push","Object","entries","map","index","flights","currentIndex","parseInt","nextIndex","segmentRoute","route","filter","Boolean","paginationConfig","pageSize","showSizeChanger","showTotal","total","range","pageSizeOptions","position","title","open","onCancel","footer","width","styles","body","padding","maxHeight","overflow","content","maxWidth","children","style","marginBottom","display","gap","flex","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","type","disabled","toLowerCase","startsWith","onClick","color","flightData","onDateRangeSelect","selectedRange","onSearch","textAlign","margin","marginTop","Title","level","segment","_segment$flights$find","dataSource","pagination","size","some","f","isSelected","Text","strong","find","layoverDuration","keys","dataIndex","key","render","airlinesList","flexDirection","split","airlineName","airline","a","label","replace","airlineCode","alignItems","src","process","env","PUBLIC_URL","alt","height","objectFit","borderRadius","onError","from","to","Set","values","flatMap","join","duration","totalMinutes","segments","sort","b","forEach","nextSegmentIndex","toString","currentFlight","nextFlight","arrivalTime","ArrivesAt","departureTime","DepartsAt","layoverMinutes","diff","hours","Math","floor","minutes","departs","format","arrives","economyPrice","originAirport","_selectedFlights$4","_selectedFlights$4$","IATA","destAirport","_selectedFlights3","_selectedFlights3$","totalDistance","distance","pricing","p","Zone","Economy","toLocaleString","businessPrice","hasFirstOnly","first","economy","business","hasAllBusiness","every","hasAllFirst","_selectedFlights$5","_selectedFlights$5$","_selectedFlights4","_selectedFlights4$","businessDistance","console","log","hasBusiness","rawDistance","percentage","round","businessPercentage","fromZone","toZone","matchedPricing","Business","firstPrice","_selectedFlights$6","_selectedFlights$6$","_selectedFlights5","_selectedFlights5$","First","jsx","_c","$RefreshReg$"],"sources":["C:/Users/nguyen77/docker-neo4j/route-builder-ac1/src/components/FlightSearch/FlightDetailsModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Modal, DatePicker, Input, Spin, Table, Button, Typography } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport { getSegmentColumns } from './segmentColumns';\r\nimport useFlightDetails from './hooks/useFlightDetails';\r\nimport FlightAvailabilityCalendar from './FlightAvailabilityCalendar';\r\nimport airlines from './data/airlines';\r\nimport { airports } from './data/airports';\r\nimport pricingData from './data/pricing.json';\r\nconst { RangePicker } = DatePicker;\r\n\r\nconst FlightDetailsModal = ({ isVisible, currentRoute, onClose }) => {\r\n  const [dateRangeError, setDateRangeError] = useState(false);\r\n  const {\r\n    selectedDates,\r\n    setSelectedDates,\r\n    apiKey,\r\n    setApiKey,\r\n    segmentDetails,\r\n    isLoadingSegments,\r\n    handleDateSearch,\r\n    handleCalendarSearch,\r\n    resetDetails,\r\n    columns,\r\n    selectedFlights,\r\n    availabilityData,\r\n    isLoadingAvailability,\r\n  } = useFlightDetails(getSegmentColumns);\r\n\r\n  // Clear data when modal closes\r\n  useEffect(() => {\r\n    if (!isVisible) {\r\n      resetDetails();\r\n      setDateRangeError(false);\r\n      setSelectedDates(null);\r\n      setApiKey('');\r\n    }\r\n  }, [isVisible]);\r\n\r\n  const handleOk = () => {\r\n    handleDateSearch(currentRoute);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    onClose();\r\n  };\r\n\r\n  const handleCalendarDateSelect = (dateRange) => {\r\n    setSelectedDates(dateRange);\r\n    setDateRangeError(false);\r\n  };\r\n\r\n  const handleCalendarSearchClick = () => {\r\n    if (!selectedDates) {\r\n      setDateRangeError(true);\r\n      return;\r\n    }\r\n    handleDateSearch(currentRoute);\r\n  };\r\n\r\n  // Function to group flights by segment with safety checks\r\n  const getSegmentTables = () => {\r\n    if (!segmentDetails?.length || !currentRoute?.length) return [];\r\n\r\n    // Group flights by segment index\r\n    const segmentGroups = segmentDetails.reduce((acc, flight) => {\r\n      const segmentIndex = flight.segmentIndex;\r\n      if (!acc[segmentIndex]) {\r\n        acc[segmentIndex] = [];\r\n      }\r\n      acc[segmentIndex].push(flight);\r\n      return acc;\r\n    }, {});\r\n\r\n    // Convert to array format with segment info\r\n    return Object.entries(segmentGroups).map(([index, flights]) => {\r\n      const currentIndex = parseInt(index);\r\n      const nextIndex = currentIndex + 1;\r\n      \r\n      // Safety check for route indices\r\n      if (nextIndex >= currentRoute.length) return null;\r\n      \r\n      const segmentRoute = `${currentRoute[currentIndex]}-${currentRoute[nextIndex]}`;\r\n      return {\r\n        index: currentIndex,\r\n        route: segmentRoute,\r\n        flights\r\n      };\r\n    }).filter(Boolean); // Remove any null entries\r\n  };\r\n\r\n  // Add pagination settings\r\n  const paginationConfig = {\r\n    pageSize: 5,\r\n    showSizeChanger: true,\r\n    showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} flights`,\r\n    pageSizeOptions: ['5', '10', '20', '50'],\r\n    position: ['bottomLeft']\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Flight Details\"\r\n      open={isVisible}\r\n      onCancel={handleCancel}\r\n      footer={null}\r\n      width={1600}\r\n      styles={{\r\n        body: { \r\n          padding: '12px',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto'\r\n        },\r\n        content: {\r\n          maxWidth: '100vw'\r\n        }\r\n      }}\r\n    >\r\n      <div style={{ marginBottom: 16 }}>\r\n        <div style={{ display: 'flex', gap: '8px', marginBottom: 16 }}>\r\n          <div style={{ display: 'flex', gap: '8px', flex: 1 }}>\r\n            <Input\r\n              placeholder=\"Enter your yapping password (Under Development)\"\r\n              value={apiKey}\r\n              onChange={(e) => setApiKey(e.target.value)}\r\n              style={{ flex: 1 }}\r\n            />\r\n            <Button\r\n              type=\"primary\"\r\n              disabled={!apiKey || !apiKey.toLowerCase().startsWith('pro')}\r\n              onClick={() => handleCalendarSearch(currentRoute)}\r\n            >\r\n              Apply\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        {dateRangeError && (\r\n          <div style={{ color: 'red' }}>\r\n            Please select a date range in the calendar\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <FlightAvailabilityCalendar \r\n        flightData={availabilityData}\r\n        currentRoute={currentRoute}\r\n        onDateRangeSelect={handleCalendarDateSelect}\r\n        selectedRange={selectedDates}\r\n        onSearch={handleCalendarSearchClick}\r\n      />\r\n\r\n      {isLoadingSegments ? (\r\n        <div style={{ textAlign: 'center', margin: '20px 0' }}>\r\n          <Spin />\r\n        </div>\r\n      ) : (\r\n        segmentDetails?.length > 0 && (\r\n          <div style={{ marginTop: 0 }}>\r\n            <Typography.Title level={4} style={{ marginBottom: 0 }}>\r\n              Flights By Segment\r\n            </Typography.Title>\r\n            {getSegmentTables().map((segment, index) => (\r\n              <div key={segment.index} style={{ marginBottom: 0 }}>\r\n                <Typography.Title level={5} style={{ marginBottom: 12 }}>\r\n                  Segment {segment.index} ({segment.route}):\r\n                </Typography.Title>\r\n                <Table\r\n                  columns={columns}\r\n                  dataSource={segment.flights}\r\n                  pagination={paginationConfig}\r\n                  size=\"small\"\r\n                />\r\n                \r\n                {/* Add layover duration if there's a next segment and flights are selected */}\r\n                {index < getSegmentTables().length - 1 && segment.flights.some(f => f.isSelected) && (\r\n                  <div style={{ \r\n                    padding: '0px',\r\n                    margin: '0px',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    <Typography.Text strong>\r\n                      {segment.flights.find(f => f.isSelected)?.layoverDuration \r\n                        ? `Layover duration: ${segment.flights.find(f => f.isSelected).layoverDuration}`\r\n                        : 'Select flights to see layover duration'}\r\n                    </Typography.Text>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )\r\n      )}\r\n\r\n      {/* Add Summary Table */}\r\n      {Object.keys(selectedFlights).length > 0 && (\r\n        <div style={{ marginTop: 24 }}>\r\n          <Typography.Title level={4}>Journey Summary</Typography.Title>\r\n          <Table\r\n            columns={[\r\n              {\r\n                title: 'From',\r\n                dataIndex: 'from',\r\n                key: 'from',\r\n              },\r\n              {\r\n                title: 'To',\r\n                dataIndex: 'to',\r\n                key: 'to',\r\n              },\r\n              {\r\n                title: 'Airlines',\r\n                dataIndex: 'airlines',\r\n                key: 'airlines',\r\n                render: (airlinesList) => (\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                    {airlinesList.split(', ').map(airlineName => {\r\n                      const airline = airlines.find(a => airlineName.startsWith(a.label.replace(` (${a.value})`, '')));\r\n                      const airlineCode = airline?.value;\r\n                      return (\r\n                        <div key={airlineCode} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                          <img \r\n                            src={`${process.env.PUBLIC_URL}/${airlineCode}.png`}\r\n                            alt={airlineCode}\r\n                            style={{ \r\n                              width: '24px', \r\n                              height: '24px',\r\n                              objectFit: 'contain',\r\n                              borderRadius: '4px'\r\n                            }} \r\n                            onError={(e) => {\r\n                              e.target.style.display = 'none';\r\n                            }}\r\n                          />\r\n                          {airlineName}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Duration',\r\n                dataIndex: 'duration',\r\n                key: 'duration',\r\n              },\r\n              {\r\n                title: 'Departs',\r\n                dataIndex: 'departs',\r\n                key: 'departs',\r\n              },\r\n              {\r\n                title: 'Arrives',\r\n                dataIndex: 'arrives',\r\n                key: 'arrives',\r\n              },\r\n              {\r\n                title: 'Economy Price',\r\n                dataIndex: 'economyPrice',\r\n                key: 'economyPrice',\r\n              },\r\n              {\r\n                title: 'Business Price (Max %)',\r\n                dataIndex: 'businessPrice',\r\n                key: 'businessPrice',\r\n              },\r\n              {\r\n                title: 'First Price (Max %)',\r\n                dataIndex: 'firstPrice',\r\n                key: 'firstPrice',\r\n              },\r\n            ]}\r\n            dataSource={[{\r\n              key: 'summary',\r\n              from: selectedFlights[0]?.[0]?.from || '-',\r\n              to: selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.to || '-',\r\n              airlines: [...new Set(Object.values(selectedFlights).flatMap(flights => \r\n                flights.map(f => f.airlines)\r\n              ))].join(', '),\r\n              duration: (() => {\r\n                let totalMinutes = 0;\r\n                const segments = Object.keys(selectedFlights).sort((a, b) => parseInt(a) - parseInt(b));\r\n                \r\n                segments.forEach(segmentIndex => {\r\n                  const flight = selectedFlights[segmentIndex][0];\r\n                  totalMinutes += parseInt(flight.duration);\r\n                  \r\n                  const nextSegmentIndex = (parseInt(segmentIndex) + 1).toString();\r\n                  if (selectedFlights[nextSegmentIndex]) {\r\n                    const currentFlight = selectedFlights[segmentIndex][0];\r\n                    const nextFlight = selectedFlights[nextSegmentIndex][0];\r\n                    \r\n                    const arrivalTime = dayjs(currentFlight.ArrivesAt);\r\n                    const departureTime = dayjs(nextFlight.DepartsAt);\r\n                    const layoverMinutes = departureTime.diff(arrivalTime, 'minute');\r\n                    \r\n                    totalMinutes += layoverMinutes;\r\n                  }\r\n                });\r\n                \r\n                const hours = Math.floor(totalMinutes / 60);\r\n                const minutes = totalMinutes % 60;\r\n                return `${hours}h ${minutes}m`;\r\n              })(),\r\n              departs: dayjs(selectedFlights[0]?.[0]?.DepartsAt).format('HH:mm MM-DD'),\r\n              arrives: dayjs(selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.ArrivesAt).format('HH:mm MM-DD'),\r\n              economyPrice: (() => {\r\n                // Get origin and destination airports\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[0]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.to);\r\n                \r\n                if (!originAirport || !destAirport) return '-';\r\n\r\n                // Calculate total distance\r\n                let totalDistance = 0;\r\n                Object.values(selectedFlights).forEach(flights => {\r\n                  flights.forEach(flight => {\r\n                    totalDistance += parseInt(flight.distance || 0);\r\n                  });\r\n                });\r\n\r\n                // Find matching price in pricing data\r\n                const pricing = pricingData.find(p => \r\n                  p[\"From Region\"] === originAirport.Zone &&\r\n                  p[\"To Region\"] === destAirport.Zone &&\r\n                  totalDistance >= p[\"Min Distance\"] &&\r\n                  totalDistance <= p[\"Max Distance\"]\r\n                );\r\n\r\n                return pricing ? pricing.Economy.toLocaleString() : '-';\r\n              })(),\r\n              businessPrice: (() => {\r\n                // Check if any segment has first class only (no eco or business)\r\n                const hasFirstOnly = Object.values(selectedFlights).some(flights => \r\n                  flights.some(flight => flight.first && !flight.economy && !flight.business)\r\n                );\r\n\r\n                // Check if all segments have business availability\r\n                const hasAllBusiness = Object.values(selectedFlights).every(flights => \r\n                  flights.some(flight => flight.business)\r\n                );\r\n\r\n                // Check if all segments have first class\r\n                const hasAllFirst = Object.values(selectedFlights).every(flights => \r\n                  flights.some(flight => flight.first)\r\n                );\r\n\r\n                // Return N/A if any of these conditions are true\r\n                if (hasFirstOnly || hasAllFirst) return 'N/A';\r\n\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[0]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.to);\r\n                \r\n                if (!originAirport || !destAirport) return '-';\r\n\r\n                let totalDistance = 0;\r\n                let businessDistance = 0;\r\n\r\n                console.log('Selected Flights:', selectedFlights);\r\n\r\n                Object.values(selectedFlights).forEach((flights, index) => {\r\n                  flights.forEach(flight => {\r\n                    const distance = parseInt(flight.distance || 0);\r\n                    console.log(`Segment ${index}:`, {\r\n                      from: flight.from,\r\n                      to: flight.to,\r\n                      distance,\r\n                      hasBusiness: flight.business,\r\n                      rawDistance: flight.distance\r\n                    });\r\n                    \r\n                    totalDistance += distance;\r\n                    if (flight.business) {\r\n                      businessDistance += distance;\r\n                    }\r\n                  });\r\n                });\r\n\r\n                console.log('Distance Summary:', {\r\n                  totalDistance,\r\n                  businessDistance,\r\n                  percentage: Math.round((businessDistance / totalDistance) * 100)\r\n                });\r\n\r\n                const businessPercentage = Math.round((businessDistance / totalDistance) * 100);\r\n\r\n                const pricing = pricingData.find(p => \r\n                  p[\"From Region\"] === originAirport.Zone &&\r\n                  p[\"To Region\"] === destAirport.Zone &&\r\n                  totalDistance >= p[\"Min Distance\"] &&\r\n                  totalDistance <= p[\"Max Distance\"]\r\n                );\r\n\r\n                console.log('Pricing Match:', {\r\n                  fromZone: originAirport.Zone,\r\n                  toZone: destAirport.Zone,\r\n                  totalDistance,\r\n                  matchedPricing: pricing\r\n                });\r\n\r\n                return pricing ? `${pricing.Business.toLocaleString()} (${businessPercentage}%)` : '-';\r\n              })(),\r\n              firstPrice: (() => {\r\n                // Check if all segments have first class availability\r\n                const hasAllFirst = Object.values(selectedFlights).every(flights => \r\n                  flights.some(flight => flight.first)\r\n                );\r\n\r\n                if (!hasAllFirst) return 'N/A';\r\n\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[0]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.to);\r\n                \r\n                if (!originAirport || !destAirport) return '-';\r\n\r\n                let totalDistance = 0;\r\n                Object.values(selectedFlights).forEach(flights => {\r\n                  flights.forEach(flight => {\r\n                    totalDistance += parseInt(flight.distance || 0);\r\n                  });\r\n                });\r\n\r\n                const pricing = pricingData.find(p => \r\n                  p[\"From Region\"] === originAirport.Zone &&\r\n                  p[\"To Region\"] === destAirport.Zone &&\r\n                  totalDistance >= p[\"Min Distance\"] &&\r\n                  totalDistance <= p[\"Max Distance\"]\r\n                );\r\n\r\n                return pricing && pricing.First ? pricing.First.toLocaleString() : '-';\r\n              })(),\r\n            }]}\r\n            pagination={false}\r\n            size=\"small\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        :global(.ant-table) {\r\n          font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\r\n        }\r\n      `}</style>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default FlightDetailsModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
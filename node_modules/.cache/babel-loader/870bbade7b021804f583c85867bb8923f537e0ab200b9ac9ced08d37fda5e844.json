{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nguyen77\\\\docker-neo4j\\\\route-builder-ac1\\\\src\\\\components\\\\FlightSearch\\\\FlightDetailsModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Modal, DatePicker, Input, Spin, Table, Button, Typography, Pagination } from 'antd';\nimport dayjs from 'dayjs';\nimport { getSegmentColumns } from './segmentColumns';\nimport useFlightDetails from './hooks/useFlightDetails';\nimport FlightAvailabilityCalendar from './FlightAvailabilityCalendar';\nimport airlines from './data/airlines';\nimport { airports } from './data/airports';\nimport pricingData from './data/pricing.json';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  RangePicker\n} = DatePicker;\nconst FlightDetailsModal = ({\n  isVisible,\n  currentRoute,\n  onClose\n}) => {\n  _s();\n  var _selectedFlights$, _selectedFlights$$, _selectedFlights, _selectedFlights$2;\n  const [dateRangeError, setDateRangeError] = useState(false);\n  const [paginationSettings, setPaginationSettings] = useState({});\n  const {\n    selectedDates,\n    setSelectedDates,\n    apiKey,\n    setApiKey,\n    segmentDetails,\n    isLoadingSegments,\n    handleDateSearch,\n    handleCalendarSearch,\n    resetDetails,\n    columns,\n    selectedFlights,\n    availabilityData,\n    isLoadingAvailability\n  } = useFlightDetails(getSegmentColumns);\n\n  // Clear data when modal closes\n  useEffect(() => {\n    if (!isVisible) {\n      resetDetails();\n      setDateRangeError(false);\n      setSelectedDates(null);\n      setApiKey('');\n      setPaginationSettings({}); // Reset pagination\n    }\n  }, [isVisible]);\n  const handleOk = () => {\n    handleDateSearch(currentRoute);\n  };\n  const handleCancel = () => {\n    onClose();\n  };\n  const handleCalendarDateSelect = dateRange => {\n    setSelectedDates(dateRange);\n    setDateRangeError(false);\n  };\n  const handleCalendarSearchClick = () => {\n    if (!selectedDates) {\n      setDateRangeError(true);\n      return;\n    }\n    handleDateSearch(currentRoute);\n  };\n\n  // Function to handle pagination change for a specific segment\n  const handlePaginationChange = (segmentIndex, page, pageSize) => {\n    setPaginationSettings(prev => ({\n      ...prev,\n      [segmentIndex]: {\n        page,\n        pageSize\n      }\n    }));\n  };\n\n  // Function to group flights by segment with safety checks\n  const getSegmentTables = () => {\n    if (!segmentDetails || segmentDetails.length === 0) return [];\n\n    // Group flights by segment and filter out hidden flights\n    const segments = segmentDetails.reduce((acc, flight) => {\n      if (flight.hidden) return acc; // Skip hidden flights\n\n      if (!acc[flight.segmentIndex]) {\n        acc[flight.segmentIndex] = {\n          index: flight.segmentIndex,\n          route: `${flight.from}-${flight.to}`,\n          flights: []\n        };\n      }\n      acc[flight.segmentIndex].flights.push(flight);\n      return acc;\n    }, {});\n    return Object.values(segments);\n  };\n\n  // Add pagination settings\n  const getPaginationConfig = (segmentIndex, totalItems) => {\n    var _paginationSettings$s, _paginationSettings$s2;\n    return {\n      current: ((_paginationSettings$s = paginationSettings[segmentIndex]) === null || _paginationSettings$s === void 0 ? void 0 : _paginationSettings$s.page) || 1,\n      pageSize: ((_paginationSettings$s2 = paginationSettings[segmentIndex]) === null || _paginationSettings$s2 === void 0 ? void 0 : _paginationSettings$s2.pageSize) || 5,\n      total: totalItems,\n      showSizeChanger: true,\n      showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} flights`,\n      pageSizeOptions: ['5', '10', '20', '50'],\n      onChange: (page, pageSize) => handlePaginationChange(segmentIndex, page, pageSize),\n      position: ['bottomLeft']\n    };\n  };\n\n  // Get paginated flights for a segment\n  const getPaginatedFlights = (flights, segmentIndex) => {\n    const {\n      page = 1,\n      pageSize = 5\n    } = paginationSettings[segmentIndex] || {};\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n    return flights.slice(start, end);\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: \"Flight Details\",\n    open: isVisible,\n    onCancel: handleCancel,\n    footer: null,\n    width: 1600,\n    styles: {\n      body: {\n        padding: '12px',\n        maxHeight: '90vh',\n        overflow: 'auto'\n      },\n      content: {\n        maxWidth: '100vw'\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px',\n          marginBottom: 16\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '8px',\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Enter your yapping password (Under Development)\",\n            value: apiKey,\n            onChange: e => setApiKey(e.target.value),\n            style: {\n              flex: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            disabled: !apiKey || !apiKey.toLowerCase().startsWith('pro'),\n            onClick: () => handleCalendarSearch(currentRoute),\n            children: \"Apply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), dateRangeError && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red'\n        },\n        children: \"Please select a date range in the calendar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FlightAvailabilityCalendar, {\n      flightData: availabilityData,\n      currentRoute: currentRoute,\n      onDateRangeSelect: handleCalendarDateSelect,\n      selectedRange: selectedDates,\n      onSearch: handleCalendarSearchClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), isLoadingSegments ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        margin: '20px 0'\n      },\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }, this) : (segmentDetails === null || segmentDetails === void 0 ? void 0 : segmentDetails.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 4,\n        style: {\n          marginBottom: 16\n        },\n        children: \"Flights By Segment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }, this), getSegmentTables().map(segment => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n            level: 5,\n            style: {\n              margin: 0\n            },\n            children: [\"Segment \", segment.index + 1, \" (\", segment.route, \"):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Pagination, {\n              ...getPaginationConfig(segment.index, segment.flights.length),\n              size: \"small\",\n              style: {\n                display: 'inline-block',\n                marginBottom: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          columns: columns,\n          dataSource: getPaginatedFlights(segment.flights, segment.index),\n          pagination: false,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }, this), segment.index < getSegmentTables().length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '0px',\n            margin: '16px',\n            textAlign: 'center',\n            fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace'\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography.Text, {\n            strong: true,\n            children: (() => {\n              const currentSegmentFlights = selectedFlights[segment.index];\n              const nextSegmentFlights = selectedFlights[segment.index + 1];\n              if (!(currentSegmentFlights !== null && currentSegmentFlights !== void 0 && currentSegmentFlights[0]) || !(nextSegmentFlights !== null && nextSegmentFlights !== void 0 && nextSegmentFlights[0])) {\n                return 'Select flights to see layover duration';\n              }\n              const currentFlight = currentSegmentFlights[0];\n              const nextFlight = nextSegmentFlights[0];\n              const arrivalTime = dayjs(currentFlight.ArrivesAt);\n              const departureTime = dayjs(nextFlight.DepartsAt);\n              const layoverMinutes = departureTime.diff(arrivalTime, 'minute');\n              const hours = Math.floor(layoverMinutes / 60);\n              const minutes = layoverMinutes % 60;\n              return `Layover duration: ${hours}h ${minutes}m`;\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 19\n        }, this)]\n      }, segment.index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }, this), Object.keys(selectedFlights).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography.Title, {\n        level: 4,\n        children: \"Journey Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        columns: [{\n          title: 'From',\n          dataIndex: 'from',\n          key: 'from',\n          render: () => {\n            var _selectedFlights$firs;\n            const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\n            const firstFlight = (_selectedFlights$firs = selectedFlights[firstSegmentIndex]) === null || _selectedFlights$firs === void 0 ? void 0 : _selectedFlights$firs[0];\n            return (firstFlight === null || firstFlight === void 0 ? void 0 : firstFlight.from) || '-';\n          }\n        }, {\n          title: 'To',\n          dataIndex: 'to',\n          key: 'to'\n        }, {\n          title: 'Airlines',\n          dataIndex: 'airlines',\n          key: 'airlines',\n          render: airlinesList => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '4px'\n            },\n            children: airlinesList.split(', ').map(airlineName => {\n              const airline = airlines.find(a => airlineName.startsWith(a.label.replace(` (${a.value})`, '')));\n              const airlineCode = airline === null || airline === void 0 ? void 0 : airline.value;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${process.env.PUBLIC_URL}/${airlineCode}.png`,\n                  alt: airlineCode,\n                  style: {\n                    width: '24px',\n                    height: '24px',\n                    objectFit: 'contain',\n                    borderRadius: '4px'\n                  },\n                  onError: e => {\n                    e.target.style.display = 'none';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 27\n                }, this), airlineName]\n              }, airlineCode, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 19\n          }, this)\n        }, {\n          title: 'Duration',\n          dataIndex: 'duration',\n          key: 'duration'\n        }, {\n          title: 'Departs',\n          dataIndex: 'departs',\n          key: 'departs'\n        }, {\n          title: 'Arrives',\n          dataIndex: 'arrives',\n          key: 'arrives'\n        }, {\n          title: 'Economy Price',\n          dataIndex: 'economyPrice',\n          key: 'economyPrice'\n        }, {\n          title: 'Business Price (Max %)',\n          dataIndex: 'businessPrice',\n          key: 'businessPrice',\n          render: (text, record) => {\n            if (text === 'N/A') return text;\n            const [price, percentage] = text.split(' (');\n            if (!percentage) return text;\n            return `${price} (${percentage}`;\n          }\n        }, {\n          title: 'First Price (Max %)',\n          dataIndex: 'firstPrice',\n          key: 'firstPrice',\n          render: (text, record) => {\n            if (text === 'N/A') return text;\n            const [price, percentage] = text.split(' (');\n            if (!percentage) return text;\n            return `${price} (${percentage}`;\n          }\n        }],\n        dataSource: [{\n          key: '1',\n          from: (_selectedFlights$firs2 => {\n            const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\n            const firstFlight = (_selectedFlights$firs2 = selectedFlights[firstSegmentIndex]) === null || _selectedFlights$firs2 === void 0 ? void 0 : _selectedFlights$firs2[0];\n            return (firstFlight === null || firstFlight === void 0 ? void 0 : firstFlight.from) || '-';\n          })(),\n          to: (_selectedFlights$last => {\n            const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\n            const lastFlight = (_selectedFlights$last = selectedFlights[lastSegmentIndex]) === null || _selectedFlights$last === void 0 ? void 0 : _selectedFlights$last[0];\n            return (lastFlight === null || lastFlight === void 0 ? void 0 : lastFlight.to) || '-';\n          })(),\n          airlines: [...new Set(Object.values(selectedFlights).flatMap(flights => flights.map(f => f.airlines)))].join(', '),\n          duration: (() => {\n            let totalMinutes = 0;\n            const segments = Object.keys(selectedFlights).sort((a, b) => parseInt(a) - parseInt(b));\n            segments.forEach(segmentIndex => {\n              const flight = selectedFlights[segmentIndex][0];\n              totalMinutes += parseInt(flight.duration);\n              const nextSegmentIndex = (parseInt(segmentIndex) + 1).toString();\n              if (selectedFlights[nextSegmentIndex]) {\n                const currentFlight = selectedFlights[segmentIndex][0];\n                const nextFlight = selectedFlights[nextSegmentIndex][0];\n                const arrivalTime = dayjs(currentFlight.ArrivesAt);\n                const departureTime = dayjs(nextFlight.DepartsAt);\n                const layoverMinutes = departureTime.diff(arrivalTime, 'minute');\n                totalMinutes += layoverMinutes;\n              }\n            });\n            const hours = Math.floor(totalMinutes / 60);\n            const minutes = totalMinutes % 60;\n            return `${hours}h ${minutes}m`;\n          })(),\n          departs: dayjs((_selectedFlights$ = selectedFlights[0]) === null || _selectedFlights$ === void 0 ? void 0 : (_selectedFlights$$ = _selectedFlights$[0]) === null || _selectedFlights$$ === void 0 ? void 0 : _selectedFlights$$.DepartsAt).format('HH:mm MM-DD'),\n          arrives: dayjs((_selectedFlights = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights === void 0 ? void 0 : (_selectedFlights$2 = _selectedFlights[0]) === null || _selectedFlights$2 === void 0 ? void 0 : _selectedFlights$2.ArrivesAt).format('HH:mm MM-DD'),\n          economyPrice: (() => {\n            // Get origin and destination airports\n            const originAirport = airports.find(a => {\n              var _selectedFlights$3, _selectedFlights$3$;\n              return a.IATA === ((_selectedFlights$3 = selectedFlights[0]) === null || _selectedFlights$3 === void 0 ? void 0 : (_selectedFlights$3$ = _selectedFlights$3[0]) === null || _selectedFlights$3$ === void 0 ? void 0 : _selectedFlights$3$.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights2, _selectedFlights2$;\n              return a.IATA === ((_selectedFlights2 = selectedFlights[Object.keys(selectedFlights).length - 1]) === null || _selectedFlights2 === void 0 ? void 0 : (_selectedFlights2$ = _selectedFlights2[0]) === null || _selectedFlights2$ === void 0 ? void 0 : _selectedFlights2$.to);\n            });\n            if (!originAirport || !destAirport) return '-';\n\n            // Calculate total distance\n            let totalDistance = 0;\n            Object.values(selectedFlights).forEach(flights => {\n              flights.forEach(flight => {\n                totalDistance += parseInt(flight.distance || 0);\n              });\n            });\n\n            // Find matching price in pricing data\n            const pricing = pricingData.find(p => p[\"From Region\"] === originAirport.Zone && p[\"To Region\"] === destAirport.Zone && totalDistance >= p[\"Min Distance\"] && totalDistance <= p[\"Max Distance\"]);\n            return pricing ? pricing.Economy.toLocaleString() : '-';\n          })(),\n          businessPrice: (() => {\n            const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\n            const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\n            const originAirport = airports.find(a => {\n              var _selectedFlights$firs3, _selectedFlights$firs4;\n              return a.IATA === ((_selectedFlights$firs3 = selectedFlights[firstSegmentIndex]) === null || _selectedFlights$firs3 === void 0 ? void 0 : (_selectedFlights$firs4 = _selectedFlights$firs3[0]) === null || _selectedFlights$firs4 === void 0 ? void 0 : _selectedFlights$firs4.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights$last2, _selectedFlights$last3;\n              return a.IATA === ((_selectedFlights$last2 = selectedFlights[lastSegmentIndex]) === null || _selectedFlights$last2 === void 0 ? void 0 : (_selectedFlights$last3 = _selectedFlights$last2[0]) === null || _selectedFlights$last3 === void 0 ? void 0 : _selectedFlights$last3.to);\n            });\n            if (!originAirport || !destAirport) return '-';\n            let totalDistance = 0;\n            let businessDistance = 0;\n            Object.entries(selectedFlights).forEach(([index, flights]) => {\n              flights.forEach(flight => {\n                const distance = parseInt(flight.distance || 0);\n                totalDistance += distance;\n                if (flight.business) businessDistance += distance;\n              });\n            });\n            const businessPercentage = Math.round(businessDistance / totalDistance * 100);\n            const pricing = pricingData.find(p => p[\"From Region\"] === originAirport.Zone && p[\"To Region\"] === destAirport.Zone && totalDistance >= p[\"Min Distance\"] && totalDistance <= p[\"Max Distance\"]);\n            if (!pricing || !pricing.Business) return '-';\n            return `${pricing.Business.toLocaleString()} (${businessPercentage}% J)`;\n          })(),\n          firstPrice: (() => {\n            const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\n            const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\n            const originAirport = airports.find(a => {\n              var _selectedFlights$firs5, _selectedFlights$firs6;\n              return a.IATA === ((_selectedFlights$firs5 = selectedFlights[firstSegmentIndex]) === null || _selectedFlights$firs5 === void 0 ? void 0 : (_selectedFlights$firs6 = _selectedFlights$firs5[0]) === null || _selectedFlights$firs6 === void 0 ? void 0 : _selectedFlights$firs6.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights$last4, _selectedFlights$last5;\n              return a.IATA === ((_selectedFlights$last4 = selectedFlights[lastSegmentIndex]) === null || _selectedFlights$last4 === void 0 ? void 0 : (_selectedFlights$last5 = _selectedFlights$last4[0]) === null || _selectedFlights$last5 === void 0 ? void 0 : _selectedFlights$last5.to);\n            });\n            if (!originAirport || !destAirport) return '-';\n            let totalDistance = 0;\n            let businessDistance = 0;\n            let firstDistance = 0;\n            Object.entries(selectedFlights).forEach(([index, flights]) => {\n              flights.forEach(flight => {\n                const distance = parseInt(flight.distance || 0);\n                totalDistance += distance;\n                if (flight.business && !flight.first) businessDistance += distance;\n                if (flight.first) firstDistance += distance;\n              });\n            });\n            const businessPercentage = Math.round(businessDistance / totalDistance * 100);\n            const firstPercentage = Math.round(firstDistance / totalDistance * 100);\n            const pricing = pricingData.find(p => p[\"From Region\"] === originAirport.Zone && p[\"To Region\"] === destAirport.Zone && totalDistance >= p[\"Min Distance\"] && totalDistance <= p[\"Max Distance\"]);\n            if (!pricing || !pricing.First) return '-';\n            let percentageText = '';\n            if (businessPercentage > 0 && firstPercentage > 0) {\n              percentageText = `${firstPercentage}% F, ${businessPercentage}% J)`;\n            } else if (firstPercentage > 0) {\n              percentageText = `${firstPercentage}% F)`;\n            } else {\n              percentageText = '0%)';\n            }\n            return `${pricing.First.toLocaleString()} (${percentageText}`;\n          })()\n        }],\n        pagination: false,\n        size: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12,\n          fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography.Text, {\n          children: (() => {\n            const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\n            const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\n            const originAirport = airports.find(a => {\n              var _selectedFlights$firs7, _selectedFlights$firs8;\n              return a.IATA === ((_selectedFlights$firs7 = selectedFlights[firstSegmentIndex]) === null || _selectedFlights$firs7 === void 0 ? void 0 : (_selectedFlights$firs8 = _selectedFlights$firs7[0]) === null || _selectedFlights$firs8 === void 0 ? void 0 : _selectedFlights$firs8.from);\n            });\n            const destAirport = airports.find(a => {\n              var _selectedFlights$last6, _selectedFlights$last7;\n              return a.IATA === ((_selectedFlights$last6 = selectedFlights[lastSegmentIndex]) === null || _selectedFlights$last6 === void 0 ? void 0 : (_selectedFlights$last7 = _selectedFlights$last6[0]) === null || _selectedFlights$last7 === void 0 ? void 0 : _selectedFlights$last7.to);\n            });\n            if (!originAirport || !destAirport) return 'Unable to validate route: airport data missing';\n\n            // Haversine formula\n            const R = 3959; // Earth's radius in miles\n            const lat1 = originAirport.Latitude * Math.PI / 180;\n            const lat2 = destAirport.Latitude * Math.PI / 180;\n            const dLat = (destAirport.Latitude - originAirport.Latitude) * Math.PI / 180;\n            const dLon = (destAirport.Longitude - originAirport.Longitude) * Math.PI / 180;\n            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n            const directDistance = Math.round(R * c);\n\n            // Calculate total segment distance\n            let totalSegmentDistance = 0;\n            Object.values(selectedFlights).forEach(flights => {\n              flights.forEach(flight => {\n                totalSegmentDistance += parseInt(flight.distance || 0);\n              });\n            });\n            const isValid = totalSegmentDistance <= 2 * directDistance;\n            const percentage = Math.round(totalSegmentDistance / directDistance * 100);\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 8,\n                  fontSize: '16px',\n                  fontWeight: 'bold',\n                  color: isValid ? '#52c41a' : '#f5222d',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '8px',\n                  width: '100%'\n                },\n                children: isValid ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u2713\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"ROUTING VALIDATED\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 536,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u2717\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 540,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"THIS ROUTING IS INVALID\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 541,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 21\n              }, this)\n            }, void 0, false);\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        :global(.ant-table) {\n          font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n_s(FlightDetailsModal, \"Dfc19PXw9MDiPzfL0yAToTxnHFY=\", false, function () {\n  return [useFlightDetails];\n});\n_c = FlightDetailsModal;\nexport default FlightDetailsModal;\nvar _c;\n$RefreshReg$(_c, \"FlightDetailsModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","DatePicker","Input","Spin","Table","Button","Typography","Pagination","dayjs","getSegmentColumns","useFlightDetails","FlightAvailabilityCalendar","airlines","airports","pricingData","jsxDEV","_jsxDEV","Fragment","_Fragment","RangePicker","FlightDetailsModal","isVisible","currentRoute","onClose","_s","_selectedFlights$","_selectedFlights$$","_selectedFlights","_selectedFlights$2","dateRangeError","setDateRangeError","paginationSettings","setPaginationSettings","selectedDates","setSelectedDates","apiKey","setApiKey","segmentDetails","isLoadingSegments","handleDateSearch","handleCalendarSearch","resetDetails","columns","selectedFlights","availabilityData","isLoadingAvailability","handleOk","handleCancel","handleCalendarDateSelect","dateRange","handleCalendarSearchClick","handlePaginationChange","segmentIndex","page","pageSize","prev","getSegmentTables","length","segments","reduce","acc","flight","hidden","index","route","from","to","flights","push","Object","values","getPaginationConfig","totalItems","_paginationSettings$s","_paginationSettings$s2","current","total","showSizeChanger","showTotal","range","pageSizeOptions","onChange","position","getPaginatedFlights","start","end","slice","title","open","onCancel","footer","width","styles","body","padding","maxHeight","overflow","content","maxWidth","children","style","marginBottom","display","gap","flex","placeholder","value","e","target","fileName","_jsxFileName","lineNumber","columnNumber","type","disabled","toLowerCase","startsWith","onClick","color","flightData","onDateRangeSelect","selectedRange","onSearch","textAlign","margin","marginTop","Title","level","map","segment","justifyContent","alignItems","size","dataSource","pagination","fontFamily","Text","strong","currentSegmentFlights","nextSegmentFlights","currentFlight","nextFlight","arrivalTime","ArrivesAt","departureTime","DepartsAt","layoverMinutes","diff","hours","Math","floor","minutes","keys","dataIndex","key","render","_selectedFlights$firs","firstSegmentIndex","min","Number","firstFlight","airlinesList","flexDirection","split","airlineName","airline","find","a","label","replace","airlineCode","src","process","env","PUBLIC_URL","alt","height","objectFit","borderRadius","onError","text","record","price","percentage","_selectedFlights$firs2","_selectedFlights$last","lastSegmentIndex","max","lastFlight","Set","flatMap","f","join","duration","totalMinutes","sort","b","parseInt","forEach","nextSegmentIndex","toString","departs","format","arrives","economyPrice","originAirport","_selectedFlights$3","_selectedFlights$3$","IATA","destAirport","_selectedFlights2","_selectedFlights2$","totalDistance","distance","pricing","p","Zone","Economy","toLocaleString","businessPrice","_selectedFlights$firs3","_selectedFlights$firs4","_selectedFlights$last2","_selectedFlights$last3","businessDistance","entries","business","businessPercentage","round","Business","firstPrice","_selectedFlights$firs5","_selectedFlights$firs6","_selectedFlights$last4","_selectedFlights$last5","firstDistance","first","firstPercentage","First","percentageText","_selectedFlights$firs7","_selectedFlights$firs8","_selectedFlights$last6","_selectedFlights$last7","R","lat1","Latitude","PI","lat2","dLat","dLon","Longitude","sin","cos","c","atan2","sqrt","directDistance","totalSegmentDistance","isValid","fontSize","fontWeight","jsx","_c","$RefreshReg$"],"sources":["C:/Users/nguyen77/docker-neo4j/route-builder-ac1/src/components/FlightSearch/FlightDetailsModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Modal, DatePicker, Input, Spin, Table, Button, Typography, Pagination } from 'antd';\r\nimport dayjs from 'dayjs';\r\nimport { getSegmentColumns } from './segmentColumns';\r\nimport useFlightDetails from './hooks/useFlightDetails';\r\nimport FlightAvailabilityCalendar from './FlightAvailabilityCalendar';\r\nimport airlines from './data/airlines';\r\nimport { airports } from './data/airports';\r\nimport pricingData from './data/pricing.json';\r\nconst { RangePicker } = DatePicker;\r\n\r\nconst FlightDetailsModal = ({ isVisible, currentRoute, onClose }) => {\r\n  const [dateRangeError, setDateRangeError] = useState(false);\r\n  const [paginationSettings, setPaginationSettings] = useState({});\r\n  \r\n  const {\r\n    selectedDates,\r\n    setSelectedDates,\r\n    apiKey,\r\n    setApiKey,\r\n    segmentDetails,\r\n    isLoadingSegments,\r\n    handleDateSearch,\r\n    handleCalendarSearch,\r\n    resetDetails,\r\n    columns,\r\n    selectedFlights,\r\n    availabilityData,\r\n    isLoadingAvailability,\r\n  } = useFlightDetails(getSegmentColumns);\r\n\r\n  // Clear data when modal closes\r\n  useEffect(() => {\r\n    if (!isVisible) {\r\n      resetDetails();\r\n      setDateRangeError(false);\r\n      setSelectedDates(null);\r\n      setApiKey('');\r\n      setPaginationSettings({}); // Reset pagination\r\n    }\r\n  }, [isVisible]);\r\n\r\n  const handleOk = () => {\r\n    handleDateSearch(currentRoute);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    onClose();\r\n  };\r\n\r\n  const handleCalendarDateSelect = (dateRange) => {\r\n    setSelectedDates(dateRange);\r\n    setDateRangeError(false);\r\n  };\r\n\r\n  const handleCalendarSearchClick = () => {\r\n    if (!selectedDates) {\r\n      setDateRangeError(true);\r\n      return;\r\n    }\r\n    handleDateSearch(currentRoute);\r\n  };\r\n\r\n  // Function to handle pagination change for a specific segment\r\n  const handlePaginationChange = (segmentIndex, page, pageSize) => {\r\n    setPaginationSettings(prev => ({\r\n      ...prev,\r\n      [segmentIndex]: { page, pageSize }\r\n    }));\r\n  };\r\n\r\n  // Function to group flights by segment with safety checks\r\n  const getSegmentTables = () => {\r\n    if (!segmentDetails || segmentDetails.length === 0) return [];\r\n\r\n    // Group flights by segment and filter out hidden flights\r\n    const segments = segmentDetails.reduce((acc, flight) => {\r\n      if (flight.hidden) return acc; // Skip hidden flights\r\n      \r\n      if (!acc[flight.segmentIndex]) {\r\n        acc[flight.segmentIndex] = {\r\n          index: flight.segmentIndex,\r\n          route: `${flight.from}-${flight.to}`,\r\n          flights: []\r\n        };\r\n      }\r\n      acc[flight.segmentIndex].flights.push(flight);\r\n      return acc;\r\n    }, {});\r\n\r\n    return Object.values(segments);\r\n  };\r\n\r\n  // Add pagination settings\r\n  const getPaginationConfig = (segmentIndex, totalItems) => ({\r\n    current: paginationSettings[segmentIndex]?.page || 1,\r\n    pageSize: paginationSettings[segmentIndex]?.pageSize || 5,\r\n    total: totalItems,\r\n    showSizeChanger: true,\r\n    showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} flights`,\r\n    pageSizeOptions: ['5', '10', '20', '50'],\r\n    onChange: (page, pageSize) => handlePaginationChange(segmentIndex, page, pageSize),\r\n    position: ['bottomLeft']\r\n  });\r\n\r\n  // Get paginated flights for a segment\r\n  const getPaginatedFlights = (flights, segmentIndex) => {\r\n    const { page = 1, pageSize = 5 } = paginationSettings[segmentIndex] || {};\r\n    const start = (page - 1) * pageSize;\r\n    const end = start + pageSize;\r\n    return flights.slice(start, end);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Flight Details\"\r\n      open={isVisible}\r\n      onCancel={handleCancel}\r\n      footer={null}\r\n      width={1600}\r\n      styles={{\r\n        body: { \r\n          padding: '12px',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto'\r\n        },\r\n        content: {\r\n          maxWidth: '100vw'\r\n        }\r\n      }}\r\n    >\r\n      <div style={{ marginBottom: 16 }}>\r\n        <div style={{ display: 'flex', gap: '8px', marginBottom: 16 }}>\r\n          <div style={{ display: 'flex', gap: '8px', flex: 1 }}>\r\n            <Input\r\n              placeholder=\"Enter your yapping password (Under Development)\"\r\n              value={apiKey}\r\n              onChange={(e) => setApiKey(e.target.value)}\r\n              style={{ flex: 1 }}\r\n            />\r\n            <Button\r\n              type=\"primary\"\r\n              disabled={!apiKey || !apiKey.toLowerCase().startsWith('pro')}\r\n              onClick={() => handleCalendarSearch(currentRoute)}\r\n            >\r\n              Apply\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        {dateRangeError && (\r\n          <div style={{ color: 'red' }}>\r\n            Please select a date range in the calendar\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <FlightAvailabilityCalendar \r\n        flightData={availabilityData}\r\n        currentRoute={currentRoute}\r\n        onDateRangeSelect={handleCalendarDateSelect}\r\n        selectedRange={selectedDates}\r\n        onSearch={handleCalendarSearchClick}\r\n      />\r\n\r\n      {isLoadingSegments ? (\r\n        <div style={{ textAlign: 'center', margin: '20px 0' }}>\r\n          <Spin />\r\n        </div>\r\n      ) : (\r\n        segmentDetails?.length > 0 && (\r\n          <div style={{ marginTop: 0 }}>\r\n            <Typography.Title level={4} style={{ marginBottom: 16 }}>\r\n              Flights By Segment\r\n            </Typography.Title>\r\n            {getSegmentTables().map((segment) => (\r\n              <div key={segment.index} style={{ marginBottom: 16 }}>\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'space-between', \r\n                  alignItems: 'center',\r\n                  marginBottom: 12 \r\n                }}>\r\n                  <Typography.Title level={5} style={{ margin: 0 }}>\r\n                    Segment {segment.index+1} ({segment.route}):\r\n                  </Typography.Title>\r\n                  <div>\r\n                    <Pagination\r\n                      {...getPaginationConfig(segment.index, segment.flights.length)}\r\n                      size=\"small\"\r\n                      style={{ \r\n                        display: 'inline-block',\r\n                        marginBottom: 0\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <Table\r\n                  columns={columns}\r\n                  dataSource={getPaginatedFlights(segment.flights, segment.index)}\r\n                  pagination={false}\r\n                  size=\"small\"\r\n                />\r\n                \r\n                {/* Add layover duration if there's a next segment and flights are selected */}\r\n                {segment.index < getSegmentTables().length - 1 && (\r\n                  <div style={{ \r\n                    padding: '0px',\r\n                    margin: '16px',\r\n                    textAlign: 'center',\r\n                    fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace'\r\n                  }}>\r\n                    <Typography.Text strong>\r\n                      {(() => {\r\n                        const currentSegmentFlights = selectedFlights[segment.index];\r\n                        const nextSegmentFlights = selectedFlights[segment.index + 1];\r\n                        \r\n                        if (!currentSegmentFlights?.[0] || !nextSegmentFlights?.[0]) {\r\n                          return 'Select flights to see layover duration';\r\n                        }\r\n\r\n                        const currentFlight = currentSegmentFlights[0];\r\n                        const nextFlight = nextSegmentFlights[0];\r\n                        \r\n                        const arrivalTime = dayjs(currentFlight.ArrivesAt);\r\n                        const departureTime = dayjs(nextFlight.DepartsAt);\r\n                        const layoverMinutes = departureTime.diff(arrivalTime, 'minute');\r\n                        \r\n                        const hours = Math.floor(layoverMinutes / 60);\r\n                        const minutes = layoverMinutes % 60;\r\n                        \r\n                        return `Layover duration: ${hours}h ${minutes}m`;\r\n                      })()}\r\n                    </Typography.Text>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )\r\n      )}\r\n\r\n      {/* Add Summary Table */}\r\n      {Object.keys(selectedFlights).length > 0 && (\r\n        <div style={{ marginTop: 24 }}>\r\n          <Typography.Title level={4}>Journey Summary</Typography.Title>\r\n          <Table\r\n            columns={[\r\n              {\r\n                title: 'From',\r\n                dataIndex: 'from',\r\n                key: 'from',\r\n                render: () => {\r\n                  const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\r\n                  const firstFlight = selectedFlights[firstSegmentIndex]?.[0];\r\n                  return firstFlight?.from || '-';\r\n                }\r\n              },\r\n              {\r\n                title: 'To',\r\n                dataIndex: 'to',\r\n                key: 'to',\r\n              },\r\n              {\r\n                title: 'Airlines',\r\n                dataIndex: 'airlines',\r\n                key: 'airlines',\r\n                render: (airlinesList) => (\r\n                  <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                    {airlinesList.split(', ').map(airlineName => {\r\n                      const airline = airlines.find(a => airlineName.startsWith(a.label.replace(` (${a.value})`, '')));\r\n                      const airlineCode = airline?.value;\r\n                      return (\r\n                        <div key={airlineCode} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                          <img \r\n                            src={`${process.env.PUBLIC_URL}/${airlineCode}.png`}\r\n                            alt={airlineCode}\r\n                            style={{ \r\n                              width: '24px', \r\n                              height: '24px',\r\n                              objectFit: 'contain',\r\n                              borderRadius: '4px'\r\n                            }} \r\n                            onError={(e) => {\r\n                              e.target.style.display = 'none';\r\n                            }}\r\n                          />\r\n                          {airlineName}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ),\r\n              },\r\n              {\r\n                title: 'Duration',\r\n                dataIndex: 'duration',\r\n                key: 'duration',\r\n              },\r\n              {\r\n                title: 'Departs',\r\n                dataIndex: 'departs',\r\n                key: 'departs',\r\n              },\r\n              {\r\n                title: 'Arrives',\r\n                dataIndex: 'arrives',\r\n                key: 'arrives',\r\n              },\r\n              {\r\n                title: 'Economy Price',\r\n                dataIndex: 'economyPrice',\r\n                key: 'economyPrice',\r\n              },\r\n              {\r\n                title: 'Business Price (Max %)',\r\n                dataIndex: 'businessPrice',\r\n                key: 'businessPrice',\r\n                render: (text, record) => {\r\n                  if (text === 'N/A') return text;\r\n                  const [price, percentage] = text.split(' (');\r\n                  if (!percentage) return text;\r\n                  return `${price} (${percentage}`;\r\n                }\r\n              },\r\n              {\r\n                title: 'First Price (Max %)',\r\n                dataIndex: 'firstPrice',\r\n                key: 'firstPrice',\r\n                render: (text, record) => {\r\n                  if (text === 'N/A') return text;\r\n                  const [price, percentage] = text.split(' (');\r\n                  if (!percentage) return text;\r\n                  return `${price} (${percentage}`;\r\n                }\r\n              },\r\n            ]}\r\n            dataSource={[{\r\n              key: '1',\r\n              from: (() => {\r\n                const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\r\n                const firstFlight = selectedFlights[firstSegmentIndex]?.[0];\r\n                return firstFlight?.from || '-';\r\n              })(),\r\n              to: (() => {\r\n                const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\r\n                const lastFlight = selectedFlights[lastSegmentIndex]?.[0];\r\n                return lastFlight?.to || '-';\r\n              })(),\r\n              airlines: [...new Set(Object.values(selectedFlights).flatMap(flights => \r\n                flights.map(f => f.airlines)\r\n              ))].join(', '),\r\n              duration: (() => {\r\n                let totalMinutes = 0;\r\n                const segments = Object.keys(selectedFlights).sort((a, b) => parseInt(a) - parseInt(b));\r\n                \r\n                segments.forEach(segmentIndex => {\r\n                  const flight = selectedFlights[segmentIndex][0];\r\n                  totalMinutes += parseInt(flight.duration);\r\n                  \r\n                  const nextSegmentIndex = (parseInt(segmentIndex) + 1).toString();\r\n                  if (selectedFlights[nextSegmentIndex]) {\r\n                    const currentFlight = selectedFlights[segmentIndex][0];\r\n                    const nextFlight = selectedFlights[nextSegmentIndex][0];\r\n                    \r\n                    const arrivalTime = dayjs(currentFlight.ArrivesAt);\r\n                    const departureTime = dayjs(nextFlight.DepartsAt);\r\n                    const layoverMinutes = departureTime.diff(arrivalTime, 'minute');\r\n                    \r\n                    totalMinutes += layoverMinutes;\r\n                  }\r\n                });\r\n                \r\n                const hours = Math.floor(totalMinutes / 60);\r\n                const minutes = totalMinutes % 60;\r\n                return `${hours}h ${minutes}m`;\r\n              })(),\r\n              departs: dayjs(selectedFlights[0]?.[0]?.DepartsAt).format('HH:mm MM-DD'),\r\n              arrives: dayjs(selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.ArrivesAt).format('HH:mm MM-DD'),\r\n              economyPrice: (() => {\r\n                // Get origin and destination airports\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[0]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[Object.keys(selectedFlights).length - 1]?.[0]?.to);\r\n                \r\n                if (!originAirport || !destAirport) return '-';\r\n\r\n                // Calculate total distance\r\n                let totalDistance = 0;\r\n                Object.values(selectedFlights).forEach(flights => {\r\n                  flights.forEach(flight => {\r\n                    totalDistance += parseInt(flight.distance || 0);\r\n                  });\r\n                });\r\n\r\n                // Find matching price in pricing data\r\n                const pricing = pricingData.find(p => \r\n                  p[\"From Region\"] === originAirport.Zone &&\r\n                  p[\"To Region\"] === destAirport.Zone &&\r\n                  totalDistance >= p[\"Min Distance\"] &&\r\n                  totalDistance <= p[\"Max Distance\"]\r\n                );\r\n\r\n                return pricing ? pricing.Economy.toLocaleString() : '-';\r\n              })(),\r\n              businessPrice: (() => {\r\n                const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\r\n                const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[firstSegmentIndex]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[lastSegmentIndex]?.[0]?.to);\r\n                \r\n                if (!originAirport || !destAirport) return '-';\r\n\r\n                let totalDistance = 0;\r\n                let businessDistance = 0;\r\n\r\n                Object.entries(selectedFlights).forEach(([index, flights]) => {\r\n                  flights.forEach(flight => {\r\n                    const distance = parseInt(flight.distance || 0);\r\n                    totalDistance += distance;\r\n                    if (flight.business) businessDistance += distance;\r\n                  });\r\n                });\r\n\r\n                const businessPercentage = Math.round((businessDistance / totalDistance) * 100);\r\n\r\n                const pricing = pricingData.find(p => \r\n                  p[\"From Region\"] === originAirport.Zone &&\r\n                  p[\"To Region\"] === destAirport.Zone &&\r\n                  totalDistance >= p[\"Min Distance\"] &&\r\n                  totalDistance <= p[\"Max Distance\"]\r\n                );\r\n\r\n                if (!pricing || !pricing.Business) return '-';\r\n                return `${pricing.Business.toLocaleString()} (${businessPercentage}% J)`;\r\n              })(),\r\n              firstPrice: (() => {\r\n                const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\r\n                const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[firstSegmentIndex]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[lastSegmentIndex]?.[0]?.to);\r\n                \r\n                if (!originAirport || !destAirport) return '-';\r\n\r\n                let totalDistance = 0;\r\n                let businessDistance = 0;\r\n                let firstDistance = 0;\r\n\r\n                Object.entries(selectedFlights).forEach(([index, flights]) => {\r\n                  flights.forEach(flight => {\r\n                    const distance = parseInt(flight.distance || 0);\r\n                    totalDistance += distance;\r\n                    if (flight.business && !flight.first) businessDistance += distance;\r\n                    if (flight.first) firstDistance += distance;\r\n                  });\r\n                });\r\n\r\n                const businessPercentage = Math.round((businessDistance / totalDistance) * 100);\r\n                const firstPercentage = Math.round((firstDistance / totalDistance) * 100);\r\n\r\n                const pricing = pricingData.find(p => \r\n                  p[\"From Region\"] === originAirport.Zone &&\r\n                  p[\"To Region\"] === destAirport.Zone &&\r\n                  totalDistance >= p[\"Min Distance\"] &&\r\n                  totalDistance <= p[\"Max Distance\"]\r\n                );\r\n\r\n                if (!pricing || !pricing.First) return '-';\r\n\r\n                let percentageText = '';\r\n                if (businessPercentage > 0 && firstPercentage > 0) {\r\n                  percentageText = `${firstPercentage}% F, ${businessPercentage}% J)`;\r\n                } else if (firstPercentage > 0) {\r\n                  percentageText = `${firstPercentage}% F)`;\r\n                } else {\r\n                  percentageText = '0%)';\r\n                }\r\n\r\n                return `${pricing.First.toLocaleString()} (${percentageText}`;\r\n              })(),\r\n            }]}\r\n            pagination={false}\r\n            size=\"small\"\r\n          />\r\n          \r\n          {/* Add Route Validation */}\r\n          <div style={{ marginTop: 12, fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace' }}>\r\n            <Typography.Text>\r\n              {(() => {\r\n                const firstSegmentIndex = Math.min(...Object.keys(selectedFlights).map(Number));\r\n                const lastSegmentIndex = Math.max(...Object.keys(selectedFlights).map(Number));\r\n                const originAirport = airports.find(a => a.IATA === selectedFlights[firstSegmentIndex]?.[0]?.from);\r\n                const destAirport = airports.find(a => a.IATA === selectedFlights[lastSegmentIndex]?.[0]?.to);\r\n\r\n                if (!originAirport || !destAirport) return 'Unable to validate route: airport data missing';\r\n\r\n                // Haversine formula\r\n                const R = 3959; // Earth's radius in miles\r\n                const lat1 = originAirport.Latitude * Math.PI / 180;\r\n                const lat2 = destAirport.Latitude * Math.PI / 180;\r\n                const dLat = (destAirport.Latitude - originAirport.Latitude) * Math.PI / 180;\r\n                const dLon = (destAirport.Longitude - originAirport.Longitude) * Math.PI / 180;\r\n\r\n                const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n                          Math.cos(lat1) * Math.cos(lat2) *\r\n                          Math.sin(dLon/2) * Math.sin(dLon/2);\r\n                \r\n                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n                const directDistance = Math.round(R * c);\r\n\r\n                // Calculate total segment distance\r\n                let totalSegmentDistance = 0;\r\n                Object.values(selectedFlights).forEach(flights => {\r\n                  flights.forEach(flight => {\r\n                    totalSegmentDistance += parseInt(flight.distance || 0);\r\n                  });\r\n                });\r\n\r\n                const isValid = totalSegmentDistance <= (2 * directDistance);\r\n                const percentage = Math.round(totalSegmentDistance/directDistance * 100);\r\n\r\n                return (\r\n                  <>\r\n                    <div style={{ \r\n                      marginTop: 8,\r\n                      fontSize: '16px',\r\n                      fontWeight: 'bold',\r\n                      color: isValid ? '#52c41a' : '#f5222d',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      gap: '8px',\r\n                      width: '100%'\r\n                    }}>\r\n                      {isValid ? (\r\n                        <>\r\n                          <span>✓</span>\r\n                          <span>ROUTING VALIDATED</span>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <span>✗</span>\r\n                          <span>THIS ROUTING IS INVALID</span>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </>\r\n                );\r\n              })()}\r\n            </Typography.Text>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        :global(.ant-table) {\r\n          font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\r\n        }\r\n      `}</style>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default FlightDetailsModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
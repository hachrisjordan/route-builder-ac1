{"ast":null,"code":"import dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport timezone from 'dayjs/plugin/timezone';\ndayjs.extend(utc);\ndayjs.extend(timezone);\nexport const processFlightData = async (from, to, date, apiKey) => {\n  try {\n    const response = await fetch('https://backend-284998006367.us-central1.run.app/api/flight-details', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${apiKey}`\n      },\n      body: JSON.stringify({\n        from,\n        to,\n        date\n      })\n    });\n    if (!response.ok) {\n      throw new Error('Failed to fetch flight details');\n    }\n    const data = await response.json();\n    return formatFlightData(data, from, to);\n  } catch (error) {\n    console.error('Error fetching flight details:', error);\n    return [];\n  }\n};\nexport const formatFlightData = (data, from, to) => {\n  if (!data || !Array.isArray(data)) return [];\n  return data.map((flight, index) => ({\n    key: `${from}-${to}-${index}`,\n    from,\n    to,\n    flightNumber: flight.flightNumber,\n    departureTime: formatTime(flight.departureTime),\n    arrivalTime: formatTime(flight.arrivalTime),\n    duration: formatDuration(flight.duration),\n    aircraft: flight.aircraft,\n    price: formatPrice(flight.price),\n    seats: formatSeats(flight.availableSeats),\n    airline: flight.airline\n  }));\n};\nexport const formatTime = timeString => {\n  if (!timeString) return '';\n  return dayjs(timeString).format('HH:mm');\n};\nexport const formatDuration = minutes => {\n  if (!minutes) return '';\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return `${hours}h ${mins}m`;\n};\nexport const formatPrice = price => {\n  if (!price) return '';\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD'\n  }).format(price);\n};\nexport const formatSeats = seats => {\n  if (!seats) return 'N/A';\n  return seats.toString();\n};","map":{"version":3,"names":["dayjs","utc","timezone","extend","processFlightData","from","to","date","apiKey","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","formatFlightData","error","console","Array","isArray","map","flight","index","key","flightNumber","departureTime","formatTime","arrivalTime","duration","formatDuration","aircraft","price","formatPrice","seats","formatSeats","availableSeats","airline","timeString","format","minutes","hours","Math","floor","mins","Intl","NumberFormat","style","currency","toString"],"sources":["C:/Users/nguyen77/docker-neo4j/route-builder-ac1/src/components/FlightSearch/utils/flightDataProcessor.js"],"sourcesContent":["import dayjs from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport timezone from 'dayjs/plugin/timezone';\r\n\r\ndayjs.extend(utc);\r\ndayjs.extend(timezone);\r\n\r\nexport const processFlightData = async (from, to, date, apiKey) => {\r\n  try {\r\n    const response = await fetch('https://backend-284998006367.us-central1.run.app/api/flight-details', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${apiKey}`\r\n      },\r\n      body: JSON.stringify({\r\n        from,\r\n        to,\r\n        date\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to fetch flight details');\r\n    }\r\n\r\n    const data = await response.json();\r\n    return formatFlightData(data, from, to);\r\n  } catch (error) {\r\n    console.error('Error fetching flight details:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const formatFlightData = (data, from, to) => {\r\n  if (!data || !Array.isArray(data)) return [];\r\n\r\n  return data.map((flight, index) => ({\r\n    key: `${from}-${to}-${index}`,\r\n    from,\r\n    to,\r\n    flightNumber: flight.flightNumber,\r\n    departureTime: formatTime(flight.departureTime),\r\n    arrivalTime: formatTime(flight.arrivalTime),\r\n    duration: formatDuration(flight.duration),\r\n    aircraft: flight.aircraft,\r\n    price: formatPrice(flight.price),\r\n    seats: formatSeats(flight.availableSeats),\r\n    airline: flight.airline\r\n  }));\r\n};\r\n\r\nexport const formatTime = (timeString) => {\r\n  if (!timeString) return '';\r\n  return dayjs(timeString).format('HH:mm');\r\n};\r\n\r\nexport const formatDuration = (minutes) => {\r\n  if (!minutes) return '';\r\n  const hours = Math.floor(minutes / 60);\r\n  const mins = minutes % 60;\r\n  return `${hours}h ${mins}m`;\r\n};\r\n\r\nexport const formatPrice = (price) => {\r\n  if (!price) return '';\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD'\r\n  }).format(price);\r\n};\r\n\r\nexport const formatSeats = (seats) => {\r\n  if (!seats) return 'N/A';\r\n  return seats.toString();\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}